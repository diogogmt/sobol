form.form.label-inline(id='editJobForm', action='/job/edit', method='post')
  table
    tr
      td
        .field
          label(for='name') Name
          input#name.medium(name='formJob[name]', size='20', type='text', value='#{job.name}')
          br
          span #{errors.name}
      td
        .field
          label(for='desc') Description
          input#desc.medium(name='formJob[description]', size='45', type='text', value='#{job.description}')
          br
          span #{errors.description}
    tr
      td
        .field
          label Creation Date
          #{job.creationDate}
      td
        .field
          label Status
          select#jobStatus(name="formJob[status]")
            option(value="Active") Active
            option(value="Inactive") Inactive
    tr
      td
      td
        table(style='width:auto')
          tr
            td
              .field
                label Scheduled Dates
            td(align='left')
              div#datepicker
    tr
      td
        input#editJob.btn(type='submit', value='Update')
      td
        input#id(name='formJob[id]', value='#{job._id}', type='hidden')
        input#pid(name='formJob[PID]', value='#{job.PID}', type='hidden')
        input#scheduledDates(name='formJob[scheduledDates]', value='#{job.scheduledDates}', type='hidden')

script(type="text/javascript")
  $(document).ready(function() {
    $("#datepicker").multiDatesPicker();
    var dateString = '#{dates}';
    if(dateString.length > 0){
      var dateArray = dateString.split(",");
      $("#datepicker").multiDatesPicker('addDates', dateArray);
    }
    // On edit form submit
    $('#editJobForm').submit(function() {
      var dates = $('#datepicker').multiDatesPicker('getDates');
      $("#scheduledDates").val(dates);
    });
    $('#jobStatus').val('#{job.status}');
  });